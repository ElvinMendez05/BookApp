
<div class="container my-5">
  <div class="card shadow-sm border-0">
    <div class="card-body p-4">
      <h2 class="fw-bold mb-4 text-primary">
        <i class="bi bi-book-half me-2"></i>
        {{#if editMode}}Editar Libro: {{librosList.nombre}}{{else}}Crear nuevo Libro{{/if}}
      </h2>

      <form action="/libros/{{#if editMode}}edit/{{librosList.id}}{{else}}create{{/if}}" 
            method="POST" 
            enctype="multipart/form-data">

        <!-- Nombre -->
        <div class="mb-3">
          <label for="nombre" class="form-label fw-semibold">
            <i class="bi bi-type me-1"></i>Título del Libro
          </label>
          <input
            type="text"
            class="form-control shadow-sm"
            id="nombre"
            name="nombre"
            placeholder="Ej: Cien años de soledad"
            required
            value="{{#if editMode}}{{librosList.nombre}}{{/if}}"
          >
        </div>

        <!-- Imagen de Portada -->
        <div class="mb-3">
          <label for="imagen" class="form-label fw-semibold">
            <i class="bi bi-image me-1"></i>Seleccionar imagen de portada
          </label>
          <input
            type="file"
            class="form-control shadow-sm"
            id="imagen"
            name="Imagen"
            accept="image/*"
            {{#unless editMode}}required{{/unless}}
          >
          {{#if editMode}}
            <div class="mt-2">
              <p class="mb-1 fw-light text-muted">Imagen actual:</p>
              <img src="{{librosList.imagen}}" alt="Imagen actual" class="img-thumbnail" style="max-height: 120px;">
            </div>
          {{/if}}
        </div>

        <!-- Año de publicación -->
        <div class="mb-3">
          <label for="anioPublicacion" class="form-label fw-semibold">
            <i class="bi bi-calendar2 me-1"></i>Año de Publicación
          </label>
          <input
            type="number"
            class="form-control shadow-sm"
            id="anioPublicacion"
            name="anioPublicacion"
            placeholder="Ej: 1999"
            required
            min="1000"
            max="2099"
            value="{{#if editMode}}{{librosList.anioPublicacion}}{{/if}}"
          />
        </div>

        <!-- Región -->
        <div class="mb-3">
          <label for="region" class="form-label fw-semibold">
            <i class="bi bi-globe2 me-1 text-info"></i>Región
          </label>
          <select id="region" name="region" class="form-select shadow-sm" required>
            <option value="">-- Selecciona una región --</option>
            <option value="América" {{#if (eq librosList.region "América")}}selected{{/if}}>América</option>
            <option value="Europa" {{#if (eq librosList.region "Europa")}}selected{{/if}}>Europa</option>
            <option value="Asia" {{#if (eq librosList.region "Asia")}}selected{{/if}}>Asia</option>
            <option value="África" {{#if (eq librosList.region "África")}}selected{{/if}}>África</option>
          </select>
        </div>

        <!-- Categoría -->
        <div class="mb-3">
          <label for="categoriaId" class="form-label fw-semibold">Categoría</label>
          <select id="categoriaId" name="categoriaId" class="form-select shadow-sm" required>
            <option value="">-- Selecciona una categoría --</option>
            {{#each categorias}}
              <option value="{{this.id}}" {{#if (eq this.id ../librosList.categoriaId)}}selected{{/if}}>
                {{this.nombre}}
              </option>
            {{/each}}
          </select>
        </div>

        <!-- Autor -->
        <div class="mb-3">
          <label for="autorId" class="form-label fw-semibold">Autor</label>
          <select id="autorId" name="autorId" class="form-select shadow-sm" required>
            <option value="">-- Selecciona un autor --</option>
            {{#each autores}}
              <option value="{{this.id}}" {{#if (eq this.id ../librosList.autorId)}}selected{{/if}}>
                {{this.nombre}}
              </option>
            {{/each}}
          </select>
        </div>

        <!-- Editorial -->
        <div class="mb-4">
          <label for="editorialId" class="form-label fw-semibold">Editorial</label>
          <select id="editorialId" name="editorialId" class="form-select shadow-sm" required>
            <option value="">-- Selecciona una editorial --</option>
            {{#each editoriales}}
              <option value="{{this.id}}" {{#if (eq this.id ../librosList.editorialId)}}selected{{/if}}>
                {{this.nombre}}
              </option>
            {{/each}}
          </select>
        </div>

        {{#if editMode}}
          <input type="hidden" name="librosId" value="{{librosList.id}}" />
        {{/if}}

        <!-- Botones -->
        <div class="d-flex justify-content-between">
          <a href="/libros/index" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Volver
          </a>
          <button type="submit" class="btn btn-primary">
            <i class="bi bi-check-circle"></i>
            {{#if editMode}}Actualizar{{else}}Crear{{/if}}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
